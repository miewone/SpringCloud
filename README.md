# Spring Cloud 공부

## DNS
- C:\Windows\System32\drivers\etc 의 경로에 있는 host파일에 dns 주소를 추가해줘야한다.
- IANA : Internet Assigned Numbers Authority 웨논(WellKnown Port)포트는 포트번호를 따로 지정하지 않아도 서비스가 가능하다.
- 리눅스와 맵에서 포트를 열게된다면 80포트는 권한이 없다면 실행할 수 없다.

## Virtual IP 와 DNS
- 각 API 서버들에게 지정해주는 IP

## 읽기요청 부하 분산
- 기본적으로 API 서버가 DB서버에 요청을 보내 데이터를 주고받는다. 읽기가 많이 필요하는 요청에 관해서는
캐시를 만들어서 똑같은 요청이 왔을때 디비에 요청을 보내지 않고 응답을 할 수 있다.
  - 스프링부트 2.0 ( 카페인 )

- 서버가여러대일경우
    - 여러가지 서버가 동일한 요청을 받을경우 요청이 서버에 돌아가면서 요청을 하기때문에 캐시에 담긴 정보와 실제 정보가 다를 수있다.
  - Redis 서버, 랜캐시드 서버 같은 경우는 캐시를 하나의 서버에 담아서 사용한다.
  
  ### 데이터베이스를 확장하는 방법
- 클러스터링
  - 액티브 스탠바이로 서버를 구동하는게 아니라 서버 2대를 동시에 구동시킨다. 마스터 노드에서는 데이터가 저장되지않고
  자신의 하위 데이터베이스에 변경,수정 사항에 대해 알려준다. 하나의 서버가 죽어도 다른 마스터 노드에서 대신 활동을 할 수가 있음.
  - 레플리카 마스터 노드는 데이터가 없지만 하위 데이터베이스에서는 조회 수정 등 기능을 나눠서 할당한다.
  
- 샤딩
  - 데이터를 나누는 방법 , 비용 절감
  - 어떠한 대상을 가지고 서버가 그 대상을 나누어서 5개의 서버가 있다면 서바가 각 각 데이터를 나눠 가지고있는다.

## 쓰기요청 분산

- 잃기 요청만 있는것이 아니라 쓰기 요청 (동영상 업로드, 사진 업로드 등)도 있음 서버에서는 각 각의 요청을 처리해야하는데 무거운 쓰기요청에 
대응 하느라 다른 요청에 대응할수가 없음. 
  - 방안
    - 업로드 서버와  API 서버를 나누어서 만들어둔다.
    - API 서버에서 명확히 서비스 나누어 서버 별로 쪼개어야한다.
- 용량이 큰 쓰기 요청에는 처리하느라 응답이 늦어질수 있다. 
  - 폴링 : 요청에 대한 처리가 완료됬는지 질의
  - CallBack event : 끝날때 알려주는 형식 